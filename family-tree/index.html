<!DOCTYPE html>
<html lang=en>
<head>
<meta charset="utf-8"/>
<meta name=viewport content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover"/>
<link rel=stylesheet href="style.css"/>
<link rel=stylesheet href=DataInspector.css />
<title>Chart</title>
</head>
<body>
<div class="md:flex flex-col md:flex-row md:min-h-screen w-full max-w-screen-xl mx-auto">
<div id=allSampleContent class="p-4 w-full">
<div id=sample>
<div id=myDiagramDiv style="background-color:#34343c;border:solid 1px black;height:570px"></div>
</div>
</div>
</div>
<script src=go.js></script>
<script id=code>function init(){const $=go.GraphObject.make;myDiagram=$(go.Diagram,"myDiagramDiv",{allowCopy:false,allowDelete:false,maxSelectionCount:1,validCycle:go.Diagram.CycleDestinationTree,"clickCreatingTool.insertPart":function(loc){const node=go.ClickCreatingTool.prototype.insertPart.call(this,loc);if(node!==null){this.diagram.select(node);this.diagram.commandHandler.scrollToPart(node);this.diagram.commandHandler.editTextBlock(node.findObject("NAMETB"));}
return node;},layout:$(go.TreeLayout,{treeStyle:go.TreeLayout.StyleLastParents,arrangement:go.TreeLayout.ArrangementHorizontal,angle:90,layerSpacing:35,alternateAngle:90,alternateLayerSpacing:35,alternateAlignment:go.TreeLayout.AlignmentBus,alternateNodeSpacing:20}),"undoManager.isEnabled":true});myDiagram.addDiagramListener("Modified",e=>{const button=document.getElementById("SaveButton");if(button)button.disabled=!myDiagram.isModified;const idx=document.title.indexOf("*");if(myDiagram.isModified){if(idx<0)document.title+="*";}else{if(idx>=0)document.title=document.title.slice(0,idx);}});const levelColors=["#AC193D","#2672EC","#8C0095","#5133AB","#008299","#D24726","#008A00","#094AB2"];myDiagram.layout.commitNodes=function(){go.TreeLayout.prototype.commitNodes.call(this);myDiagram.layout.network.vertexes.each(v=>{if(v.node){const level=v.level%(levelColors.length);const color=levelColors[level];const shape=v.node.findObject("SHAPE");if(shape)shape.stroke=$(go.Brush,"Linear",{0:color,1:go.Brush.lightenBy(color,0.05),start:go.Spot.Left,end:go.Spot.Right});}});};function mayWorkFor(node1,node2){if(!(node1 instanceof go.Node))return false;if(node1===node2)return false;if(node2.isInTreeOf(node1))return false;return true;}
function textStyle(){return{font:"9pt  Segoe UI,sans-serif",stroke:"white"};}
function findHeadShot(pic){if(!pic)return"images/HSnopic.png";return"images/HS"+pic;}
myDiagram.nodeTemplate=$(go.Node,"Spot",{selectionObjectName:"BODY",mouseEnter:(e,node)=>node.findObject("BUTTON").opacity=node.findObject("BUTTONX").opacity=1,mouseLeave:(e,node)=>node.findObject("BUTTON").opacity=node.findObject("BUTTONX").opacity=0,mouseDragEnter:(e,node,prev)=>{const diagram=node.diagram;const selnode=diagram.selection.first();if(!mayWorkFor(selnode,node))return;const shape=node.findObject("SHAPE");if(shape){shape._prevFill=shape.fill;shape.fill="darkred";}},mouseDragLeave:(e,node,next)=>{const shape=node.findObject("SHAPE");if(shape&&shape._prevFill){shape.fill=shape._prevFill;}},mouseDrop:(e,node)=>{const diagram=node.diagram;const selnode=diagram.selection.first();if(mayWorkFor(selnode,node)){const link=selnode.findTreeParentLink();if(link!==null){link.fromNode=node;}else{diagram.toolManager.linkingTool.insertLink(node,node.port,selnode,selnode.port);}}}},new go.Binding("text","name"),new go.Binding("layerName","isSelected",sel=>sel?"Foreground":"").ofObject(),$(go.Panel,"Auto",{name:"BODY"},$(go.Shape,"Rectangle",{name:"SHAPE",fill:"#333333",stroke:'white',strokeWidth:3.5,portId:""}),$(go.Panel,"Horizontal",$(go.Picture,{name:"Picture",desiredSize:new go.Size(70,70),margin:1.5,source:"images/HSnopic.png"},new go.Binding("source","pic",findHeadShot)),$(go.Panel,"Table",{minSize:new go.Size(130,NaN),maxSize:new go.Size(150,NaN),margin:new go.Margin(6,10,0,6),defaultAlignment:go.Spot.Left},$(go.RowColumnDefinition,{column:2,width:4}),$(go.TextBlock,textStyle(),{name:"NAMETB",row:0,column:0,columnSpan:5,font:"12pt Segoe UI,sans-serif",editable:true,isMultiline:false,minSize:new go.Size(50,16)},new go.Binding("text","name").makeTwoWay()),$(go.TextBlock,"Title: ",textStyle(),{row:1,column:0}),$(go.TextBlock,textStyle(),{row:1,column:1,columnSpan:4,editable:true,isMultiline:false,minSize:new go.Size(50,14),margin:new go.Margin(0,0,0,3)},new go.Binding("text","title").makeTwoWay()),$(go.TextBlock,textStyle(),{row:2,column:0},new go.Binding("text","key",v=>"ID: "+v)),$(go.TextBlock,textStyle(),{row:3,column:0,columnSpan:5,font:"italic 9pt sans-serif",wrap:go.TextBlock.WrapFit,editable:true,minSize:new go.Size(100,14)},new go.Binding("text","comments").makeTwoWay())))),new go.Binding("isTreeExpanded").makeTwoWay(),$("TreeExpanderButton",{name:"BUTTONX",alignment:go.Spot.Bottom,opacity:0,"_treeExpandedFigure":"TriangleUp","_treeCollapsedFigure":"TriangleDown"},new go.Binding("opacity","isSelected",s=>s?1:0).ofObject()));
myDiagram.nodeTemplate.contextMenu=$("ContextMenu",$("ContextMenuButton",$(go.TextBlock,"Add Employee"),{click:(e,button)=>addEmployee(button.part.adornedPart)}),$("ContextMenuButton",$(go.TextBlock,"Vacate Position"),{click:(e,button)=>{const node=button.part.adornedPart;if(node!==null){const thisemp=node.data;myDiagram.startTransaction("vacate");myDiagram.model.setDataProperty(thisemp,"name","(Vacant)");myDiagram.model.setDataProperty(thisemp,"pic","");myDiagram.model.setDataProperty(thisemp,"comments","");myDiagram.commitTransaction("vacate");}}}),$("ContextMenuButton",$(go.TextBlock,"Remove Role"),{click:(e,button)=>{const node=button.part.adornedPart;if(node!==null){myDiagram.startTransaction("reparent remove");const chl=node.findTreeChildrenNodes();while(chl.next()){const emp=chl.value;myDiagram.model.setParentKeyForNodeData(emp.data,node.findTreeParentNode().data.key);}
myDiagram.model.removeNodeData(node.data);myDiagram.commitTransaction("reparent remove");}}}),$("ContextMenuButton",$(go.TextBlock,"Remove Department"),{click:(e,button)=>{const node=button.part.adornedPart;if(node!==null){myDiagram.startTransaction("remove dept");myDiagram.removeParts(node.findTreeParts());myDiagram.commitTransaction("remove dept");}}}));myDiagram.linkTemplate=$(go.Link,go.Link.Orthogonal,{layerName:"Background",corner:5},$(go.Shape,{strokeWidth:1.5,stroke:"#F5F5F5"}));load();if(window.Inspector)myInspector=new Inspector("myInspector",myDiagram,{properties:{"key":{readOnly:true},"comments":{}}});document.getElementById('zoomToFit').addEventListener('click',()=>myDiagram.commandHandler.zoomToFit());document.getElementById('centerRoot').addEventListener('click',()=>{myDiagram.scale=1;myDiagram.commandHandler.scrollToPart(myDiagram.findNodeForKey(1));});}
function save(){document.getElementById("mySavedModel").value=myDiagram.model.toJson();myDiagram.isModified=false;}
function load(){let dataModel={"class":"go.TreeModel","nodeDataArray":[{"key":1,"name":"Stella Payne Diaz","title":"CEO","pic":"1.jpg"},{"key":2,"name":"Luke Warm","title":"VP Marketing/Sales","pic":"2.jpg","parent":1},{"key":3,"name":"Meg Meehan Hoffa","title":"Sales","pic":"3.jpg","parent":2},{"key":4,"name":"Peggy Flaming","title":"VP Engineering","pic":"4.jpg","parent":1},{"key":5,"name":"Saul Wellingood","title":"Manufacturing","pic":"5.jpg","parent":4},{"key":6,"name":"Al Ligori","title":"Marketing","pic":"6.jpg","parent":2},{"key":7,"name":"Dot Stubadd","title":"Sales Rep","pic":"7.jpg","parent":3},{"key":8,"name":"Les Ismore","title":"Project Mgr","pic":"8.jpg","parent":5},{"key":9,"name":"April Lynn Parris","title":"Events Mgr","pic":"9.jpg","parent":6},{"key":10,"name":"Xavier Breath","title":"Engineering","pic":"10.jpg","parent":4},{"key":11,"name":"Anita Hammer","title":"Process","pic":"11.jpg","parent":5},{"key":12,"name":"Billy Aiken","title":"Software","pic":"12.jpg","parent":10},{"key":13,"name":"Stan Wellback","title":"Testing","pic":"13.jpg","parent":10},{"key":14,"name":"Marge Innovera","title":"Hardware","pic":"14.jpg","parent":10},{"key":15,"name":"Evan Elpus","title":"Quality","pic":"15.jpg","parent":5},{"key":16,"name":"Lotta B. Essen","title":"Sales Rep","pic":"16.jpg","parent":3}]};myDiagram.model=go.Model.fromJson(dataModel);let lastkey=1;myDiagram.model.makeUniqueKeyFunction=(model,data)=>{let k=data.key||lastkey;while(model.findNodeDataForKey(k))k++;data.key=lastkey=k;return k;};}
window.addEventListener('DOMContentLoaded',init);</script>
</body>
</html>